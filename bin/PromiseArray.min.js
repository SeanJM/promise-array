!function(a,b){function c(a){return"undefined"!=typeof a&&"function"==typeof a.then&&"function"==typeof a.catch}function d(a){for(var b=0,d=a.length;b<d;b++)if(!c(a[b]))return!1;return!0}function e(a,b,c){return new Promise(function(d,e){function g(b,h){var j=!!a.queue[b]&&a.queue[b][1],k=!!a.queue[b]&&a.queue[b][0];j?f(j(h,c)).then(function(a){"filter"===k&&a||"forEach"===k?g(b+1,h):"filter"===k?d(i):g(b+1,a)}).catch(e):d(h)}g(0,b)})}function f(a,b){(new Date).getTime();return new Promise(function(b,d){c(a)?a.then(function(a){b(a)}).catch(function(a){d(a)}):b(a)})}function g(a){var b=[];for(var c in a)b.push(a[c]);return b}function h(a){function b(a,b){j.method[a].forEach(function(a){a(b)}),j.method={resolve:[],reject:[]}}function c(a){b("reject",a)}function f(a){b("resolve",a)}function h(b){return function(d){e(j,d,b).then(function(c){c!==i&&(l[b]=c),k===a.length-1&&f(g(l)),k++}).catch(c)}}var j=this,k=0,l={};if(!d(a))throw"Your array must be filled with Promises";this.queue=[],this.method={resolve:[],reject:[]},a.forEach(function(a,b){a.then(h(b)).catch(c)})}var i="IhXQU9_SKsPm";h.prototype.forEach=function(a){return this.queue.push(["forEach",a]),this},h.prototype.filter=function(a){return this.queue.push(["filter",a]),this},h.prototype.map=function(a){return this.queue.push(["map",a]),this},h.prototype.catch=function(a){return this.method.reject.push(a),this},h.prototype.then=function(a){return this.method.resolve.push(a),this},"object"==typeof window?window.PromiseArray=h:"object"==typeof module&&(module.exports=h),b.true=a}({},function(){return this}());